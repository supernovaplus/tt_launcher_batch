<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>%%title%%</title>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap');

    * {
        margin: 0;
    }

    body {
        background-color: #2c062a;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 1600 800'%3E%3Cg stroke='%23000' stroke-width='66.7' stroke-opacity='0.05' %3E%3Ccircle fill='%23ff9d00' cx='0' cy='0' r='1800'/%3E%3Ccircle fill='%23fb8d17' cx='0' cy='0' r='1700'/%3E%3Ccircle fill='%23f47d24' cx='0' cy='0' r='1600'/%3E%3Ccircle fill='%23ed6e2d' cx='0' cy='0' r='1500'/%3E%3Ccircle fill='%23e35f34' cx='0' cy='0' r='1400'/%3E%3Ccircle fill='%23d85239' cx='0' cy='0' r='1300'/%3E%3Ccircle fill='%23cc453e' cx='0' cy='0' r='1200'/%3E%3Ccircle fill='%23be3941' cx='0' cy='0' r='1100'/%3E%3Ccircle fill='%23b02f43' cx='0' cy='0' r='1000'/%3E%3Ccircle fill='%23a02644' cx='0' cy='0' r='900'/%3E%3Ccircle fill='%23901e44' cx='0' cy='0' r='800'/%3E%3Ccircle fill='%23801843' cx='0' cy='0' r='700'/%3E%3Ccircle fill='%236f1341' cx='0' cy='0' r='600'/%3E%3Ccircle fill='%235e0f3d' cx='0' cy='0' r='500'/%3E%3Ccircle fill='%234e0c38' cx='0' cy='0' r='400'/%3E%3Ccircle fill='%233e0933' cx='0' cy='0' r='300'/%3E%3Ccircle fill='%232e062c' cx='0' cy='0' r='200'/%3E%3Ccircle fill='%23210024' cx='0' cy='0' r='100'/%3E%3C/g%3E%3C/svg%3E");
        background-attachment: fixed;
        background-size: cover;
        /* background by SVGBackgrounds.com */
    }

    textarea {
        background-color: rgba(255, 255, 255, 0.185);
    }

    body {
        font-family: 'Montserrat', sans-serif;
    }

    #content {
        margin: 0 auto;
        width: 550px;
        text-align: center;
    }

    h2, textarea {
        width: 100%;
    }
    
    h2, h4 {
        margin: 15px auto;
    }

    #codeDisplay, textarea {
        box-shadow: 2px 2px 5px black;
    }

    textarea {
        border: 1px solid #2c062a;
        text-align: left;
        resize: none;
        width: 100%;
        height: 321px;
    }

    #codeDisplay {
        font-family: 'Courier New', monospace;
    }

    #codeDisplay {
        width: 100%;
        margin: 0 auto;
        border: 1px solid #2c062a;
        font-weight: bold;
        text-align: left;
    }

    input[type="button"] {
        padding: 5px;
        border: none;
        cursor: pointer;
    }

    input[type="button"]:hover {
        background-color: #2c062a;
        color: white;
    }

    .color-select{
        margin-top: 10px;
        display: flex;
        justify-content: space-around;
    }

    select {
        border: 1px solid #2c062a;
        text-align: center;
    }

    h2, label {
        text-shadow: 1px 1px #891c41;
    }
    </style>
</head>
<body>
    <div id="content">
        <h2>%%title%%</h2>
        <div id="codeDisplay">
            ============================<br>
            &nbsp;&nbsp;TRANSPORT TYCOON SERVERS<br>
            ============================<br>
            %%servers_list%%
            ============================<br>
            ## Select server:<br>
            ...
        </div>
        <div class="color-select">
            <div>
                <label for="bgcolor">Background Color</label><br>
                <select id="bgcolor">
                    <option value="0" style="color:black" selected>black</option>
                    <option value="1" style="color: navy;">navy</option>
                    <option value="2" style="color: green;">green</option>
                    <option value="3" style="color: teal;">teal</option>
                    <option value="4" style="color: maroon;">maroon</option>
                    <option value="5" style="color: purple;">purple</option>
                    <option value="6" style="color: olive;">olive</option>
                    <option value="7" style="color: silver;">silver</option>
                    <option value="8" style="color: gray;">gray</option>
                    <option value="9" style="color: blue;">blue</option>
                    <option value="A" style="color: lime;">lime</option>
                    <option value="B" style="color: aqua;">aqua</option>
                    <option value="C" style="color: red;">red</option>
                    <option value="D" style="color: fuchsia;">fuchsia</option>
                    <option value="E" style="color: yellow;">yellow</option>
                    <option value="F" style="color: white;">white</option>
                </select> 
            </div>
            <div>
                <label for="textcolor">Text Color</label><br>
                <select id="textcolor">
                    <option value="0" style="color:black">black</option>
                    <option value="1" style="color: navy;">navy</option>
                    <option value="2" style="color: green;">green</option>
                    <option value="3" style="color: teal;">teal</option>
                    <option value="4" style="color: maroon;">maroon</option>
                    <option value="5" style="color: purple;">purple</option>
                    <option value="6" style="color: olive;">olive</option>
                    <option value="7" style="color: silver;">silver</option>
                    <option value="8" style="color: gray;">gray</option>
                    <option value="9" style="color: blue;">blue</option>
                    <option value="A" style="color: lime;">lime</option>
                    <option value="B" style="color: aqua;">aqua</option>
                    <option value="C" style="color: red;">red</option>
                    <option value="D" style="color: fuchsia;">fuchsia</option>
                    <option value="E" style="color: yellow;">yellow</option>
                    <option value="F" style="color: white;" selected>white</option>
                </select> 
            </div>
        </div>
        <h2>
            <input type="button" value="Download Custom Launcher" id="btn1" style="font-size: 20px; min-width: 300px;"><br>
            <input type="button" value="Download Default" id="btn2" style="font-size: 10px; min-width: 100px;"><br>
            <input type="button" value="The Code" id="btn3" style="font-size: 10px; min-width: 100px;"><br>
        </h2>
        <textarea id="code" style="visibility: hidden;" readonly>%%bat_code%%</textarea>
    </div>
    <script>
        const fileName = "tt_launcher.bat";
        const colorCodes = {"0":"black","1":"navy","2":"green","3":"teal","4":"maroon","5":"purple","6":"olive","7":"silver","8":"gray","9":"blue","A":"lime","B":"aqua","C":"red","D":"fuchsia","E":"yellow","F":"white"};
        const bgcolor = document.getElementById("bgcolor");
        const textcolor = document.getElementById("textcolor");
        const codeArea = document.getElementById("code");
        const customDownloadBtn = document.getElementById("btn1");
        const defaultDownloadBtn = document.getElementById("btn2");
        const codeBtn = document.getElementById("btn3");
        customDownloadBtn.addEventListener("click", download_custom);
        defaultDownloadBtn.addEventListener("click", () => window.location = fileName);
        codeBtn.addEventListener("click", () => {
            codeArea.style.visibility = codeArea.style.visibility === "hidden" ? "visible" : "hidden"
        });

        changeColor();

        function changeColor () {
            codeDisplay.style.backgroundColor = colorCodes[bgcolor.value];
            codeDisplay.style.color = colorCodes[textcolor.value];
            codeArea.textContent = codeArea.textContent.replace(/COLOR [0-9a-z]+/i, `COLOR ${bgcolor.value}${textcolor.value}`);
        }

        bgcolor.addEventListener("change", changeColor);
        textcolor.addEventListener("change", changeColor);

        function download_custom(){
            const data = new Blob([codeArea.value], { type: "text/bat" });
            if (window.navigator && window.navigator.msSaveOrOpenBlob) { // for IE
                window.navigator.msSaveOrOpenBlob(data, fileName);
            } else { // for Non-IE (chrome, firefox etc.)
                const a = document.createElement("a");
                document.body.appendChild(a);
                a.style = "display: none";
                const csvUrl = URL.createObjectURL(data);
                a.href = csvUrl;
                a.download = fileName;
                a.click();
                URL.revokeObjectURL(a.href)
                a.remove();
            }
        };
    </script>
</body>
</html>